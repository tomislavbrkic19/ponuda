@model Ponuda.Models.Stavke

@{
    ViewBag.Title = "Udređivanje Stavke";

}


<div class="modal-dialog">
    <div class="modal-content">
        <a href="#" class="close" data-dismiss="modal">&times;</a>
        <div class="modal-header">

            <h4 id="ModalTitle"></h4>
        </div>
        <div class="modal-body">
            @using (Html.BeginForm())
            {
                @Html.AntiForgeryToken()

                <div class="form-horizontal">
                    <h4>Edit Stavke</h4>
                    <hr />
                    @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                    @*@Html.HiddenFor(model => model.PonudaID)*@

                    <div class="form-group">
                        @Html.LabelFor(model => model.StavkaId, htmlAttributes: new { @class = "control-label col-md-2" })
                        <div class="col-md-10">
                            @Html.EditorFor(model => model.StavkaId, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.StavkaId, "", new { @class = "text-danger" })
                        </div>
                    </div>

                    <div class="form-group">
                        @*@Html.LabelFor(model => model.Artikli.NazivArtikla, htmlAttributes: new { @class = "control-label col-md-2" })*@
                        <div class="col-md-10">
                            @Html.DropDownList("PageSize", new SelectList(new Dictionary<string, int> { { "10", 10 }, { "20", 20 }, { "100", 100 } }, "Key", "Value", Model.PageSize), new { @class = "pro_pag_tf1", id = "pagesizelist" })
                            @*<select class="form-control" id="Artikli" name="Artikli"></select>*@  
                            @*@Html.DropDownList("ArtikalId"), (IEnumerable<SelectListItem>)ViewBag.Artikli, null, new { @class = "form-control" })*@
                           
                            @Html.ValidationMessageFor(model => model.Artikli.NazivArtikla, "", new { @class = "text-danger" })
                        </div>
                    </div>
                    <div class="form-group">
                        @Html.LabelFor(model => model.Artikli.JedCijenaArtikla, htmlAttributes: new { @class = "control-label col-md-2" })
                        <div class="col-md-10">
                            @Html.EditorFor(model => model.Artikli.JedCijenaArtikla, new { htmlAttributes = new { @class = "form-control disabled" } })
                            @Html.ValidationMessageFor(model => model.Artikli.JedCijenaArtikla, "", new { @class = "text-danger" })
                        </div>
                    </div>
                    <div class="form-group">
                        @Html.LabelFor(model => model.Kolicina, htmlAttributes: new { @class = "control-label col-md-2" })
                        <div class="col-md-10">
                            @Html.EditorFor(model => model.Kolicina, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.Kolicina, "", new { @class = "text-danger" })
                        </div>
                    </div>
                    <div class="form-group">
                        @Html.LabelFor(model => model.UkupnaCijenaStavke, htmlAttributes: new { @class = "control-label col-md-2" })
                        <div class="col-md-10">
                            @Html.EditorFor(model => model.UkupnaCijenaStavke, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.UkupnaCijenaStavke, "", new { @class = "text-danger" })
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="col-md-offset-2 col-md-10">
                            <input type="submit" value="Save" class="btn btn-default" />
                        </div>
                    </div>
                </div>
            }

            @*<div>
                @Html.ActionLink("Back to List", "Index")
            </div>*@

            @section Scripts {
                @Scripts.Render("~/bundles/jqueryval")
            }

            </div>

                </div>

                    </div>
<script>
   
    $(document).ready(function () {
        var sviArtikli ;
        if (sviArtikli != null) {
            //console.log("2-put nisu null:" + sviArtikli);
        } else {

            console.log("1-put jesu null:" + sviArtikli);
            $.ajax({
                type: "GET",
                url: "/api/Data/GetArtikli",
                data: "",
                async: false,
                success: function (data) {
                    sviArtikli = data;
                    //console.log('Poslije poziva');
                    //console.log(sviArtikli);
                }
            });
        }
        //console.log("Drugi put");
        //console.log(sviArtikli);
        var s = '<option value="-1">Select Artikla</option>';
        for (var i = 0; i < sviArtikli.length; i++) {
            s += '<option value="' + sviArtikli[i].ArtikalId + '">' + sviArtikli[i].NazivArtikla + '</option>';
        }
       
        $("#Artikli").html(s);
    });
       

</script>
